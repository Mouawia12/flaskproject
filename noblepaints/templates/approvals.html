{% extends 'sec.html' %}
{% set page_title_key = 'approvals.meta.title' %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/certificates.css') }}">
{% endblock %}

{% block hero %}
<section class="hero-banner" style="background-image: url('{{ url_for('static', filename='images/header09.jpg') }}');">
    <div class="container2 hero-banner__content">
        <div class="hero-breadcrumb">
            <a href="{{ url_for_lang('home_page') }}">{{ t('nav.home') }}</a>
            <span class="mx-2">/</span>
            <span>{{ t('nav.our_story.approvals') }}</span>
        </div>
        <h1 class="hero-banner__title">{{ t('approvals.hero.title') }}</h1>
        <p class="hero-banner__subtitle">{{ t('approvals.hero.subtitle') }}</p>
    </div>
</section>
{% endblock %}

{% block content %}
<section class="documents-wrapper">
    <div class="container2">
        <div class="documents-meta">
            {% if total_items %}
                {% set summary_text = t('approvals.meta.summary').replace('{start}', start_index|string).replace('{end}', end_index|string).replace('{total}', total_items|string) %}
                {{ summary_text }}
            {% else %}
                {{ t('approvals.meta.none') }}
            {% endif %}
        </div>

        {% if approvals %}
        <div class="documents-grid">
            {% for item in approvals %}
            <article class="documents-card">
                <img
                    src="{{ item.img or url_for('static', filename='images/catalogs2.webp') }}"
                    alt="{{ item.title }}"
                    loading="lazy"
                    class="documents-card__image">
                <div class="documents-card__body">
                    <h2 class="documents-card__title">{{ item.title }}</h2>
                    {% if item.description %}
                    <div class="documents-card__description">{{ item.description|safe }}</div>
                    {% endif %}
                    {% if item.link %}
                    <div class="documents-card__actions">
                        <a class="btn-view" href="{{ item.link }}" target="_blank" rel="noopener">
                            {{ t('approvals.card.view') }}
                        </a>
                    </div>
                    {% endif %}
                </div>
            </article>
            {% endfor %}
        </div>
        {% else %}
        <div class="documents-empty">
            <h3>{{ t('approvals.empty.title') }}</h3>
            <p>{{ t('approvals.empty.subtitle') }}</p>
        </div>
        {% endif %}

        {% if total_pages > 1 %}
        <div class="documents-pagination">
            <ul class="pagination">
                <li class="page-item {% if not has_prev %}disabled{% endif %}">
                    <a class="page-link" href="{% if has_prev %}{{ url_for_lang('approvals_page', page=prev_page) }}{% else %}#{% endif %}" aria-label="{{ t('approvals.pagination.previous') }}">
                        {{ t('approvals.pagination.previous') }}
                    </a>
                </li>
                {% for number in page_numbers %}
                <li class="page-item">
                    <a class="page-link {% if number == page %}active{% endif %}" href="{{ url_for_lang('approvals_page', page=number) }}" {% if number == page %}aria-current="page"{% endif %}>{{ number }}</a>
                </li>
                {% endfor %}
                <li class="page-item {% if not has_next %}disabled{% endif %}">
                    <a class="page-link" href="{% if has_next %}{{ url_for_lang('approvals_page', page=next_page) }}{% else %}#{% endif %}" aria-label="{{ t('approvals.pagination.next') }}">
                        {{ t('approvals.pagination.next') }}
                    </a>
                </li>
            </ul>
        </div>
        {% endif %}
    </div>
</section>
{% endblock %}
